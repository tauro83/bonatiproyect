<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="990" height="550" currentState='' xmlns:ns1="components.*">
	
	<mx:Script>
		<![CDATA[
			
			
			import mx.controls.Alert;
   			import mx.rpc.events.ResultEvent;
			import mx.events.CloseEvent;
			import mx.core.Application;
			import mx.collections.ArrayCollection;
			import services.RegistroAvisoWebService;
			import services.AvisoWebService;
			
			[Bindable]
			private var avisos:ArrayCollection;
			


			
			
			
				/**
		 	 * Metodo que recibe el panel EditUsuario (editarAviso), para almacenarlo, 
			 * inicializa la variable personService, para poder llamar a los metodos de este
			 * para lograr comunicarse con las clases y metodos de java.	 		
			 * */
			public function getAllAvisos():void
			{
				var avisoWebService:AvisoWebService = new AvisoWebService();
				avisoWebService.addEventListener(ResultEvent.RESULT,getAllAvisosResult);
				avisoWebService.getAllAvisoWeb();
			}
			
			/**
		 	 * Metodo que El resultado de la llamada en el metodo anterior, a las clases de java
			 * es recibido en este metodo y almacenado en un ArrayCollection, el cual sera el dataProvider 
			 * del datagrid, para mostrar los datos de los avisos que existen en el sistema.	 		
			 * */
			private function getAllAvisosResult(event:ResultEvent):void
			{
				avisos = event.result as ArrayCollection;	
							
								
			}
			
			
			
		]]>
	</mx:Script>
	
	<mx:states>
		<mx:State name="QuienesSomos">
			<mx:SetProperty target="{text1}" name="text">
				<mx:value><![CDATA[Clinica Bonati, llevamos 150 años atendiendo las cagas
 de mascotas de estos weones 

y cobrando mas caro ke la xuxa.

Ademas de cagarle la vida a 10 weones]]></mx:value>
			</mx:SetProperty>
			<mx:SetProperty target="{text1}" name="x" value="18.5"/>
			<mx:SetProperty target="{text1}" name="y" value="190"/>
			<mx:SetStyle target="{text1}" name="fontSize" value="27"/>
			<mx:SetProperty target="{text1}" name="height" value="261"/>
		</mx:State>
		<mx:State name="Info">
			<mx:SetProperty target="{text1}" name="text" value="Información"/>
			<mx:SetProperty target="{text1}" name="x" value="269.5"/>
			<mx:SetProperty target="{text1}" name="y" value="43"/>
		</mx:State>
		<mx:State name="Bienvenida"/>
		<mx:State name="Avisos">
			<mx:SetProperty target="{text1}" name="text" value="Avisos Web"/>
			<mx:SetProperty target="{text1}" name="x" value="277.5"/>
			<mx:SetProperty target="{text1}" name="y" value="31"/>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:DataGrid x="88.5" y="141" height="292" width="575" alpha="0.0" styleName="dataAvisos" dataProvider="{avisos}" fontWeight="bold" fontSize="11">
					<mx:columns>
						<mx:DataGridColumn headerText="Asunto" dataField="asunto"/>
						<mx:DataGridColumn headerText="Nombre" dataField="nombre"/>
					</mx:columns>
				</mx:DataGrid>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:Button x="43" y="504" label="Button" click="{getAllAvisos()}"/>
			</mx:AddChild>
		</mx:State>
	</mx:states>

	<mx:HBox width="100%" height="100%" y="0" x="0" styleName="colorPanel" id="hbox1" cornerRadius="20">
	
		<mx:VBox width="230" height="100%">
			<mx:Canvas width="100%" height="100%" id="canvas9">
				<mx:Canvas width="208" height="297" backgroundColor="#ffffff" styleName="homeSection" id="canvas5" y="10">
					<mx:VBox left="10" top="10" width="186" height="275" verticalGap="0" horizontalAlign="left">
						<mx:LinkButton label="Bienvenida" click="{currentState=''}" color="#F22E08"/>
						<mx:Label text="----------------------" styleName="sectionHeader" fontSize="13" fontWeight="bold" id="label2"/>
						<mx:HRule height="5" width="183" id="hrule1"/>
						<mx:LinkButton label="Quienes Somos" click="{currentState='QuienesSomos'}" id="linkbutton2"/>
						<mx:LinkButton label="Informacion importante" click="{currentState='Info'}" id="linkbutton1"/>
						<mx:Spacer height="8" width="100%"/>
						<mx:Spacer height="8" width="100%"/>
						<mx:LinkButton label="Avisos" click="{currentState='Avisos'}" id="linkbutton10"/>
					</mx:VBox>
				</mx:Canvas>
			
			</mx:Canvas>
		</mx:VBox>
		<mx:Canvas width="752" height="549" id="canvas1">
			<mx:Image x="629" y="441" source="../imagenes/Simbolo.JPG" id="image1"/>
			<mx:Text x="129" y="39" text="BienveVido a CLinica Bonati" styleName="portada" id="text1"/>
		
		    <!-- can't use binding to set the mapImage source because the style isn't available early enough -->
		</mx:Canvas>
		
	</mx:HBox>
	
	    <mx:transitions>
       <mx:Transition fromState="*" toState="*">
          <mx:Dissolve target="{text1}" />
       </mx:Transition>
    </mx:transitions>
	
</mx:Canvas>
