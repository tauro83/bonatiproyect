<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="779" height="466" borderColor="#15AD8F" title="Registrar Postoperatorio">
	
	
	
	
	
	   	<mx:Script>
		<![CDATA[
			import transferObjects.Mascota2;
			import transferObjects.PostOperatorio;
			import administracion.EditUsuarioUpdate;
			import administracion.UsuarioEditService;
			import pabellon.AddpostOperatorioService;
			import mx.events.ListEvent;
	    	import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.rpc.events.ResultEvent;
			import flash.events.MouseEvent;
            import mx.events.FlexEvent;
            import mx.rpc.events.ResultEvent;
			import mx.rpc.events.FaultEvent;
			import mx.controls.Alert;
			import mx.core.Application;
			[Bindable]
			private var pacotilla:Mascota2; 
			
			[Bindable]
			public var postope:PostOperatorio = new PostOperatorio();
			
			/**
			 * Funcion que carga los datos de la cita que se quiere editar  en panle respectivo para la 
			 * edicion
			 * 
			 */ 
			public function carga(mascotilla:Mascota2):void
			{       //esto es lo que podra edita el usuario
					pacotilla = mascotilla;
				    alimentos.text        = "";
				    indicaciones.text     = "";
				    valor.text       = "";
				    medicamentos.text     = "";
				    hora.text       = "";
				    fecha.text     = "";
				    //esto no se edita, solo muestra los datos de la mascota y del cliente
				    nombre.text 	= mascotilla.nombre;
				    raza.text   	= mascotilla.raza;
				    sexo.text		= mascotilla.sexo;
				    fecha.text  	= mascotilla.fechaNacimiento;
				    //nombreCli.text	= mascotilla.nombreDueno;
				    //rut.text	= "14051746";
				    
			}
			
			public function postOpeModificado():void
			{
				    
					
					postope.rut             = pacotilla.rut;
					postope.nombreMascota   = nombre.text; 
					postope.indicaciones    = indicaciones.text;
					postope.medicamentos    = medicamentos.text;
					postope.alimentos       = alimentos..text;
					postope.stfecha		    = fecha.text;
				    postope.hora			= hora.text;
				    postope.costo           = valor.text;
				    
				   
					carga1();
					
					
					
					
			}
			
			public function carga1():void
			{

			  var auxiliar:AddpostOperatorioService = new AddpostOperatorioService();
			  auxiliar.addEventListener(ResultEvent.RESULT,carga1Resu);
			  auxiliar.AddPostOpe(postope);
			  
			}
			public function carga1Resu(event:ResultEvent):void
			{
			   var res:int;
			   res = event.result as int;
			   if(res > 0)
			   {
			   	  Application.application.panelClinicaIni.labelMessage.text ="El post operatorio ha sido ingresado exitosamente";
			   	  this.setVisible(false,false);
			   	  Application.application.panelClinicaIni.setVisible(true,false);
			     
			   }
			   else
			   {
			      Alert.show("no");
			   }
			}
			
			public function guardaEditaCita(event:Event = null):void
			{
				
			    //Alert.show(selectedRow.hora);
			    Application.application.agenda2.setVisible(true);
			    Application.application.editarCita.setVisible(false);
			    Application.application.agenda2.labelMessage.text="Su Cita ha sido Modificada";
			    
			    
			}
			
			public function cancelarEditaCita(event:Event = null):void
			{
				
			    //Alert.show(selectedRow.hora);
			    Application.application.regPreoOp1.setVisible(true,false);
			    Application.application.regPreoOp.setVisible(false,false);
			    Application.application.regPreoOp1.labelMessage.text="Usted ha cancelado la operación";
			   
			    
			}
			[Bindable]
            public var horas:ArrayCollection = new ArrayCollection(
            [{hora:"10:30"}, {hora:"11:00"}, {hora:"11:30"}, {hora:"12:00"}, {hora:"12:30"}, 
            {hora:"15:30"}, {hora:"16:00"}, {hora:"16:30"}, {hora:"17:00"}, {hora:"17:30"}, 
            {hora:"18:00"}, {hora:"18:30"}, {hora:"19:00"}, {hora:"19:30"}]);
			
			[Bindable]
            public var ayudantes:ArrayCollection = new ArrayCollection(
            [ {label:"Todos", data:1}, 
            {label:"Ayudante Policlínico"}, 
            {label:"Ayudante Peluquería"},
            {label:"Ayudante Hotelería"},
            {label:"Ayudante Cirugía"} ]);
            
            [Bindable]
            public var usuarios:ArrayCollection = new ArrayCollection(
            [ {label:"Todos", data:1}, 
            {label:"Claudio Bonati"}, 
            {label:"Patricio Castro"},
            ]);
            [Bindable]
            public var razas:ArrayCollection = new ArrayCollection(
            [{label:"Montés"}, 
            {label:"Angora"},
            {label:"American curl" },
            ]);
            [Bindable]
            public var sexos:ArrayCollection = new ArrayCollection(
            [{label:"Macho"}, 
            {label:"Hembra"},
            ]);
            

		]]>
	</mx:Script>
	<mx:Label x="9.95" y="10" text="Mascota" width="98" fontWeight="bold"/>
	<mx:Label x="412.5" y="63.8" text="Sexo:" width="78"/>
	<mx:Label x="9.95" y="35.95" text="Nombre:" width="63.4" height="17.931034"/>
	<mx:Label x="412.5" y="32.95" text="Raza:" width="78"/>
	<mx:Label x="10" y="111" text="Postoperatorio" width="115.55" fontWeight="bold"/>
	<mx:Label x="10" y="220" text="Valor($): " width="78"/>
	<mx:Label x="9.95" y="258" text="Medicamentos:" width="98" height="17.931034"/>
	<mx:TextArea x="498.5" y="151" height="61.050003" width="160" id="alimentos"/>
	<mx:Label x="412.5" y="152" text="Alimentos:" width="78"/>
	<mx:Button x="495.25" y="382" label="Guardar" width="87" click="{postOpeModificado()} "/>
	<mx:Button x="603.55" y="382" label="Cancelar" width="91.4" click="{cancelarEditaCita()}"/>
	<mx:TextArea x="132.95" y="260" height="61" id="medicamentos"/>
	<mx:TextInput x="133" y="31" id="nombre"/>
	<mx:TextInput x="487" y="61.8" id="sexo"/>
	<mx:TextInput x="133" y="218" id="valor" height="20"/>
	<mx:Label x="10" y="63.8" text="Fecha Nacimiento:" width="107.95"/>
	<mx:TextInput x="133" y="61.8" id="fechaNacimiento"/>
	<mx:TextInput x="487" y="30.95" id="raza"/>
	<mx:Label x="10" y="180" text="Hora: " width="78"/>
	<mx:ComboBox id="hora" x="133" y="180" dataProvider="{horas}" labelField="hora" width="160"/>
	<mx:TextArea x="495.25" y="230" height="61" width="160" id="indicaciones"/>
	<mx:Label x="412.5" y="231" text="Indicaciones:" width="93"/>
	<mx:Label x="10" y="152" text="Fecha           :" width="145"/>
	<mx:DateField x="133" y="150" width="115" id="fecha"/>
	
</mx:Panel>
