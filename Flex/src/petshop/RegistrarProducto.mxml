<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" title="Registrar Producto" width="779" height="466" borderColor="#15AD8F" xmlns:ns1="util.*">
	<mx:Script>
		<![CDATA[
			//=======================================================================
			// FECHA: CREACIÓN: 23/11/09
			// AUTOR: Camilo Verdugo
			// Componente que registra un producto del area de pet-shop
			//=======================================================================
			import mx.core.Application;			
			import util.Properties; 
			import transferObjects.Producto;
			import petshop.regProducto;
			import mx.rpc.events.ResultEvent;
			private var rprod:regProducto;
			private var prod:Producto;
			
		
			private function registrar():void
			{				
				if(nomb.text.length>3){
					if(prec.costoBruto.length>3){
						rprod				= new regProducto();
						prod.nombre 		= nomb.text;
						prod.precio 		= prec.costo.text;
						prod.categoria 		= cate.selectedLabel.toString();
						prod.codigo 		= cbar.text;
						prod.descripcion 	= desc.text;
						
						rprod.registrarProducto(prod);
					 	rprod.addEventListener(ResultEvent.RESULT,registrarR);	
					 	this.resetInputs();
					}
					else
					{
						mens.text = Properties.getMensaje("Advertencia", "23");
					}
				}
				else{
					mens.text = Properties.getMensaje("Advertencia", "4");	
				}
				
				
			}
			
			private function registrarR(event:ResultEvent):void
			{
				mens.text	=  Properties.getMensaje("Informacion","24");
				this.resetInputs()
			}
			
			
			private function resetInputs():void
			{
				mens.text 		= "";
				
				nomb.text 		= "";
				prec.costo.text	= "";
				desc.text 		= "";
				cbar.text		= "";
			}
			private function cancelar():void
			{
				Application.application.panelPetshop.setVisible(true,false);
				this.setVisible(false,false);
				this.resetInputs();
			}

		]]>
	</mx:Script>
	<mx:TextInput x="120" y="8" width="163" restrict="A-Z a-z ñ Ñ Á É Í Ó Ú á é í ó ú" includeInLayout="true" id="nomb"  enabled="true" maxChars="20"/>
	<mx:Label x="25" y="10" text="Nombre:" width="69" />
	<mx:Button xmlns:mx="http://www.adobe.com/2006/mxml" width="102" height="25" x="632" label="Cancelar" y="353" click="cancelar()"/>
	<mx:Button xmlns:mx="http://www.adobe.com/2006/mxml" width="102" height="25" x="522" label="Registrar" y="353"/>
	<mx:Label x="176" y="399" width="407" height="17" id="mens" fontWeight="bold" textAlign="center"/>
	<mx:Label x="25" y="46" text="Precio:"/>
	<ns1:Precio x="120" y="46" width="161" id="prec">
	</ns1:Precio>
	<mx:Label x="25" y="169" text="Descripción:"/>
	<mx:TextArea x="121" y="168" id="desc" maxChars="160" width="309" height="106"/>
	<mx:Label x="25" y="88" text="Categoria:" width="69" />
	<mx:Label x="25" y="131" text="Codigo barra:" width="88"  />
	<mx:TextInput x="121" y="129" id="cbar" restrict="0-9"/>
	<mx:ComboBox x="121" y="86" id="cate" >
		<mx:ArrayCollection>
	         	<mx:Object label="Alimento" data="a"/>
	         	<mx:Object label="Medicamento" data="b"/>
	            <mx:Object label="Otro" data="c"/>
	    </mx:ArrayCollection>
	</mx:ComboBox>
</mx:Panel>
